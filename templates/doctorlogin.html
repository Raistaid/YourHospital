<!doctype html>
<html lang="en">

<style type='text/css'>
    * {
        padding: 0;
        margin: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
        background-image: url("{{ url_for('static', filename='images/name.jpg') }}");
        background-size: cover;
        height: 100vh;
    }

    table {
        border-collapse: collapse;
        width: 86%;
        margin: 20px auto;
        background-color: rgba(255, 255, 255, 0.9);
    }

    th, td {
        border: 1px solid black;
        padding: 8px;
        text-align: center;
    }

    th {
        background-color: #f2f2f2;
    }

    .no-appointments {
        text-align: center;
        padding: 20px;
        color: #721c24;
        background-color: #f8d7da;
    }

    .btn-success, .btn-danger {
        margin: 2px;
        padding: 6px 12px;
    }
</style>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet">
    <title>Doctor Dashboard</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">Health-Point</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link btn btn-secondary" href="/updatedoctor?docid={{docid}}">Update Profile</a>
            </div>
        </div>
    </nav>

    <h1 class="text-center mt-4" style="color: #2c3e50;">Welcome, {{docname}}</h1>

    <!-- Fixed Appointments -->
    <div class="container mt-4">
        <h3 class="text-center mb-3">Confirmed Appointments</h3>
        <table>
            <tr>
                <th>Patient Name</th>
                <th>Patient Phone</th>
                <th>Appointment Date</th>
            </tr>
            {% if fix_appointment_for_this_doctor %}
                {% for appointment in fix_appointment_for_this_doctor %}
                    <tr>
                        <td>{{ appointment[1] }}</td>
                        <td>{{ appointment[2] }}</td>
                        <td>{{ appointment[3] }}</td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="3" class="no-appointments">No confirmed appointments.</td>
                </tr>
            {% endif %}
        </table>
    </div>

    <!-- Pending Appointment Requests -->
    <div class="container mt-5">
        <h3 class="text-center mb-3">Pending Requests</h3>
        <table>
            <tr>
                <th>Patient Name</th>
                <th>Patient Phone</th>
                <th>Appointment Date</th>
                <th>Actions</th>
            </tr>
            {% if appointment_requests_for_this_doctor %}
                {% for request in appointment_requests_for_this_doctor %}
                    <tr>
                        <td>{{ request[1] }}</td>
                        <td>{{ request[2] }}</td>
                        <td>{{ request[3] }}</td>
                        <td>
                            <a href="/doctorapproveappointment?docid={{ request[0] }}&patnum={{ request[2] }}&appdate={{ request[3] }}"
                               class="btn btn-success btn-sm">Approve</a>
                            <a href="/doctordeleteappointment?docid={{ request[0] }}&patnum={{ request[2] }}"
                               class="btn btn-danger btn-sm">Delete</a>
                        </td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="4" class="no-appointments">No pending requests.</td>
                </tr>
            {% endif %}
        </table>
    </div>

</body>
</html>